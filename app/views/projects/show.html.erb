<h1><%= @project.name %></h1>

<% if current_user.friends.size > 0 %>
  <table class="table table-striped">
    <thead>
      <tr>
        <th colspan="3" class="page-header">
          <h2>Friends</h2>
        </th>
      </tr>
      <tr>
        <th>Name</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% current_user.friends.each do |friend| %>
        <tr>
          <td><%= friend.full_name.present? ? friend.full_name : friend.email %></td>
          <td>
            <%= link_to "View Profile", user_path(friend), class: "btn btn-primary btn-xs" %>
            <% if @project.users.find_by(id: friend.id) or friend.id == current_user.id %>
              <%= link_to "Remove User", user_project_delete_path(project_id: @project.id, friend_id: friend), method: :delete,
                data: { confirm: "Are you sure?" }, class: "btn btn-xs btn-danger" %>
            <% else %>
              <%= link_to "Add user", add_user_project_path(project_id: @project.id, friend_id: friend.id), method: :post, 
                      class: "btn btn-xs btn-primary" %>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  <table>  
<% else %>
  <div class="row col-lg-12">
    <p class="lead">
      You don't have any friends to add to this project, please add some
    </p>
  </div>
<% end %>